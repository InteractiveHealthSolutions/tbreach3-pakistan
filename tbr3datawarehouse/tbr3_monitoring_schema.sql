DROP TABLE IF EXISTS `fm_defaults`;
DROP TABLE IF EXISTS `fm_definition`;
DROP TABLE IF EXISTS `fm_definition_type`;
DROP TABLE IF EXISTS `fm_dictionary`;
DROP TABLE IF EXISTS `fm_encounter`;
DROP TABLE IF EXISTS `fm_encounter_element`;
DROP TABLE IF EXISTS `fm_encounter_prerequisite`;
DROP TABLE IF EXISTS `fm_encounter_results`;
DROP TABLE IF EXISTS `fm_encounter_type`;
DROP TABLE IF EXISTS `fm_encounter_value`;
DROP TABLE IF EXISTS `fm_feedback`;
DROP TABLE IF EXISTS `fm_lab_test`;
DROP TABLE IF EXISTS `fm_location`;
DROP TABLE IF EXISTS `fm_log_data`;
DROP TABLE IF EXISTS `fm_log_login`;
DROP TABLE IF EXISTS `fm_patient`;
DROP TABLE IF EXISTS `fm_person`;
DROP TABLE IF EXISTS `fm_person_role`;
DROP TABLE IF EXISTS `fm_referral`;
DROP TABLE IF EXISTS `fm_response`;
DROP TABLE IF EXISTS `fm_screening`;
DROP TABLE IF EXISTS `fm_sms`;
DROP TABLE IF EXISTS `fm_sms_log`;
DROP TABLE IF EXISTS `fm_sms_rule`;
DROP TABLE IF EXISTS `fm_sms_text`;
DROP TABLE IF EXISTS `fm_sputum_test`;
DROP TABLE IF EXISTS `fm_user`;
DROP TABLE IF EXISTS `fm_user_mapping`;
DROP TABLE IF EXISTS `fm_user_rights`;
DROP TABLE IF EXISTS `fm_visit`;
CREATE TABLE `fm_defaults` ( `definition_type` varchar(20) NOT NULL, `default_definition_key` varchar(10) NOT NULL);
CREATE TABLE `fm_definition` ( `definition_type` varchar(20) NOT NULL, `definition_key` varchar(10) NOT NULL, `definition_value` varchar(50) DEFAULT NULL);
CREATE TABLE `fm_definition_type` ( `definition_type` varchar(20) NOT NULL);
CREATE TABLE `fm_dictionary` ( `term_id` int(11) NOT NULL, `term` varchar(255) DEFAULT NULL, `definition` longtext NOT NULL, `defined_by` varchar(12) NOT NULL, `entered_on` datetime NOT NULL, `last_revised` datetime DEFAULT NULL, `revised_by` varchar(12) DEFAULT NULL, `previous_definition` longtext, `original_definition` longtext);
CREATE TABLE `fm_encounter` ( `e_id` int(11) NOT NULL, `pid1` varchar(12) NOT NULL, `pid2` varchar(12) NOT NULL, `encounter_type` varchar(10) NOT NULL, `location_id` varchar(12) DEFAULT NULL, `date_start` datetime DEFAULT NULL, `date_end` datetime DEFAULT NULL, `date_entered` date DEFAULT NULL, `description` varchar(255) DEFAULT NULL);
CREATE TABLE `fm_encounter_element` ( `encounter_type` varchar(10) NOT NULL, `element` varchar(30) NOT NULL, `validator` varchar(255) DEFAULT NULL, `description` varchar(255) DEFAULT NULL);
CREATE TABLE `fm_encounter_prerequisite` ( `encounter_type` varchar(10) NOT NULL, `prerequisite_no` int(11) NOT NULL, `prerequisite_encounter` varchar(10) NOT NULL, `condition_element` varchar(20) DEFAULT NULL, `possible_value_regex` varchar(255) DEFAULT NULL);
CREATE TABLE `fm_encounter_results` ( `e_id` int(11) NOT NULL, `pid1` varchar(12) NOT NULL, `pid2` varchar(12) NOT NULL, `encounter_type` varchar(10) NOT NULL, `element` varchar(30) NOT NULL, `value` varchar(255) DEFAULT NULL);
CREATE TABLE `fm_encounter_type` ( `encounter_type` varchar(10) NOT NULL, `description` varchar(255) DEFAULT NULL);
CREATE TABLE `fm_encounter_value` ( `encounter_type` varchar(10) NOT NULL, `element` varchar(20) NOT NULL, `value` varchar(255) NOT NULL, `consequence_procedure` varchar(255) DEFAULT NULL);
CREATE TABLE `fm_feedback` ( `feedback_id` int(11) NOT NULL, `sender_id` varchar(12) NOT NULL, `feedback_type` varchar(10) NOT NULL, `feedback` varchar(255) NOT NULL, `attachment` tinyblob, `date_reported` datetime NOT NULL, `feedback_status` varchar(10) NOT NULL);
CREATE TABLE `fm_lab_test` ( `test_no` int(11) NOT NULL, `patient_id` varchar(12) NOT NULL, `laboratory_id` varchar(12) NOT NULL, `test_type` varchar(10) NOT NULL, `ordered_on` datetime DEFAULT NULL, `ordered_by` varchar(12) DEFAULT NULL, `tested_on` datetime DEFAULT NULL, `tested_by` varchar(12) DEFAULT NULL, `test_result` varchar(50) DEFAULT NULL, `other_detail` varchar(50) DEFAULT NULL, `conclusion` varchar(10) DEFAULT NULL, `description` varchar(255) DEFAULT NULL, `error` varchar(50) DEFAULT NULL);
CREATE TABLE `fm_location` ( `location_id` varchar(12) NOT NULL, `location_name` varchar(255) NOT NULL, `location_type` varchar(10) NOT NULL, `address1` varchar(50) DEFAULT NULL, `address2` varchar(50) DEFAULT NULL, `address3` varchar(50) DEFAULT NULL, `address4` varchar(50) DEFAULT NULL, `city` varchar(20) DEFAULT NULL, `state` varchar(20) DEFAULT NULL, `country` varchar(5) DEFAULT NULL, `region` varchar(5) DEFAULT NULL, `latitude` float DEFAULT NULL, `longitude` float DEFAULT NULL, `phone` varchar(20) DEFAULT NULL, `mobile` varchar(20) DEFAULT NULL, `email` varchar(255) DEFAULT NULL, `fax` varchar(20) DEFAULT NULL, `otherPhone` varchar(20) DEFAULT NULL, `otherMobile` varchar(20) DEFAULT NULL, `otherEmail` varchar(255) DEFAULT NULL, `otherFax` varchar(20) DEFAULT NULL);
CREATE TABLE `fm_log_data` ( `log_id` int(11) NOT NULL, `user_name` varchar(50) NOT NULL, `date_logged` datetime NOT NULL, `log_type` varchar(10) NOT NULL, `entity` varchar(50) NOT NULL, `current_value` varchar(4096) DEFAULT NULL);
CREATE TABLE `fm_log_login` ( `login_no` int(11) NOT NULL, `user_name` varchar(50) NOT NULL, `date_login` datetime DEFAULT NULL, `date_logout` datetime DEFAULT NULL, `description` varchar(255) DEFAULT NULL);
CREATE TABLE `fm_patient` ( `pid` varchar(12) NOT NULL, `patient_id` varchar(12) NOT NULL, `mr_no` varchar(12) DEFAULT NULL, `external_mr_no` varchar(12) DEFAULT NULL, `date_screened` date DEFAULT NULL, `suspected_by` varchar(12) DEFAULT NULL, `disease_suspected` bit(1) DEFAULT NULL, `date_suspected` date DEFAULT NULL, `disease_confirmed` bit(1) DEFAULT NULL, `date_confirmed` date DEFAULT NULL, `confirmation_source` varchar(10) DEFAULT NULL, `confirmation_remarks` varchar(10) DEFAULT NULL, `gp` varchar(12) DEFAULT NULL, `treatment_centre` varchar(12) DEFAULT NULL, `treatment_supporter` varchar(12) DEFAULT NULL, `weight` float DEFAULT NULL, `height` float DEFAULT NULL, `blood_group` varchar(5) DEFAULT NULL, `disease_type` varchar(5) DEFAULT NULL, `disease_category` varchar(5) DEFAULT NULL, `disease_site` varchar(50) DEFAULT NULL, `treatment_phase` varchar(10) DEFAULT NULL, `regimen_type` varchar(10) DEFAULT NULL, `regimen` varchar(10) DEFAULT NULL, `e_dose` float DEFAULT NULL, `h_dose` float DEFAULT NULL, `r_dose` float DEFAULT NULL, `s_dose` float DEFAULT NULL, `z_dose` float DEFAULT NULL, `streptomycin` bit(1) DEFAULT NULL, `date_baseline` date DEFAULT NULL, `patient_type` varchar(10) DEFAULT NULL, `patient_status` varchar(10) DEFAULT NULL, `date_closed` date DEFAULT NULL, `treatment_outcome` varchar(10) DEFAULT NULL, `team` varchar(12) DEFAULT NULL, `hiv_status` varchar(10) DEFAULT NULL, `treatment_site` varchar(12) DEFAULT NULL);
CREATE TABLE `fm_person` ( `pid` varchar(12) NOT NULL, `title` varchar(5) DEFAULT NULL, `first_name` varchar(50) NOT NULL, `middle_name` varchar(50) DEFAULT NULL, `last_name` varchar(50) DEFAULT NULL, `surname` varchar(50) DEFAULT NULL, `father_name` varchar(50) DEFAULT NULL, `mother_name` varchar(50) DEFAULT NULL, `guardian_name` varchar(50) DEFAULT NULL, `gender` char(1) DEFAULT NULL, `dob` date DEFAULT NULL, `approximate_age` tinyint(4) DEFAULT NULL, `marital_status` char(1) DEFAULT NULL, `religion` varchar(50) DEFAULT NULL, `caste` varchar(50) DEFAULT NULL, `national_id` varchar(20) DEFAULT NULL, `id_owner` varchar(50) DEFAULT NULL, `alive` bit(1) DEFAULT NULL, `picture` tinyblob, `address1` varchar(20) DEFAULT NULL, `address2` varchar(20) DEFAULT NULL, `address3` varchar(20) DEFAULT NULL, `address4` varchar(20) DEFAULT NULL, `city` varchar(5) DEFAULT NULL, `state` varchar(5) DEFAULT NULL, `country` varchar(5) DEFAULT NULL, `region` varchar(5) DEFAULT NULL, `latitude` float DEFAULT NULL, `longitude` float DEFAULT NULL, `phone` varchar(20) DEFAULT NULL, `mobile` varchar(20) DEFAULT NULL, `email` varchar(255) DEFAULT NULL, `fax` varchar(20) DEFAULT NULL, `alternate_address1` varchar(20) DEFAULT NULL, `alternate_address2` varchar(20) DEFAULT NULL, `alternate_address3` varchar(20) DEFAULT NULL, `alternate_address4` varchar(20) DEFAULT NULL, `alternate_city` varchar(5) DEFAULT NULL, `alternate_state` varchar(5) DEFAULT NULL, `alternate_country` varchar(5) DEFAULT NULL, `alternate_region` varchar(5) DEFAULT NULL, `alternate_phone` varchar(20) DEFAULT NULL, `alternate_mobile` varchar(20) DEFAULT NULL, `alternate_email` varchar(255) DEFAULT NULL, `alternate_fax` varchar(20) DEFAULT NULL, `alternate_latitude` float DEFAULT NULL, `alternate_longitude` float DEFAULT NULL, `tertiary_address` varchar(255) DEFAULT NULL, `tertiary_phone` varchar(20) DEFAULT NULL, `tertiary_mobile` varchar(20) DEFAULT NULL, `tertiary_email` varchar(255) DEFAULT NULL, `language` varchar(10) DEFAULT NULL);
CREATE TABLE `fm_person_role` ( `pid` varchar(12) NOT NULL, `role` varchar(10) NOT NULL);
CREATE TABLE `fm_referral` ( `patient_id` varchar(12) NOT NULL, `referred_by` varchar(12) DEFAULT NULL, `referred_to` varchar(12) DEFAULT NULL, `reason` varchar(50) DEFAULT NULL, `date_referred` datetime DEFAULT NULL);
CREATE TABLE `fm_response` ( `response_id` int(11) NOT NULL, `responder_reference_table` varchar(255) DEFAULT NULL, `responder_reference_column` varchar(255) DEFAULT NULL, `responder_id` varchar(255) DEFAULT NULL, `responder_cell_number` varchar(255) DEFAULT NULL, `recieved_date` datetime DEFAULT NULL, `text` varchar(255) DEFAULT NULL, `type` varchar(255) DEFAULT NULL, `reference_number` varchar(255) DEFAULT NULL, `date_response_processed` datetime DEFAULT NULL);
CREATE TABLE `fm_screening` ( `screening_id` int(11) NOT NULL, `pid` varchar(12) DEFAULT NULL, `date_screened` datetime NOT NULL, `location_id` varchar(12) NOT NULL, `screened_by` varchar(12) NOT NULL, `cough` bit(1) DEFAULT NULL, `productive_cough` bit(1) DEFAULT NULL, `cough_duration` varchar(10) DEFAULT NULL, `blood_in_cough` bit(1) DEFAULT NULL, `fever` bit(1) DEFAULT NULL, `night_sweat` bit(1) DEFAULT NULL, `weight_loss` bit(1) DEFAULT NULL, `tb_history` bit(1) DEFAULT NULL, `treated_previously` bit(1) DEFAULT NULL, `completed_treatment` bit(1) DEFAULT NULL, `treatment_duration` int(11) DEFAULT NULL, `treatment_centre` varchar(255) DEFAULT NULL, `date_submitted` datetime DEFAULT NULL, `is_suspect` bit(1) NOT NULL);
CREATE TABLE `fm_sms` ( `sms_id` int(11) NOT NULL, `target_number` varchar(20) NOT NULL, `message_text` varchar(255) DEFAULT NULL, `date_due` datetime NOT NULL, `date_sent` datetime DEFAULT NULL, `status` varchar(10) DEFAULT NULL, `error_message` varchar(255) DEFAULT NULL, `failure_cause` varchar(255) DEFAULT NULL);
CREATE TABLE `fm_sms_log` ( `log_id` int(11) NOT NULL, `rule_id` varchar(10) DEFAULT NULL, `status` varchar(10) DEFAULT NULL, `cancellation_reason` varchar(255) DEFAULT NULL, `date_due` datetime DEFAULT NULL, `date_sent` datetime DEFAULT NULL, `recipient_reference_table` varchar(50) DEFAULT NULL, `recipient_reference_column` varchar(50) DEFAULT NULL, `recipient_id` varchar(12) DEFAULT NULL, `recipient_number` varchar(20) DEFAULT NULL, `text` longtext, `reference_number` varchar(20) DEFAULT NULL, `date_created` datetime DEFAULT NULL, `creator_id` varchar(12) DEFAULT NULL, `description` varchar(255) DEFAULT NULL);
CREATE TABLE `fm_sms_rule` ( `rule_id` varchar(10) NOT NULL, `rule_name` varchar(255) DEFAULT NULL, `type` varchar(10) DEFAULT NULL, `rule` varchar(255) DEFAULT NULL, `is_enabled` bit(1) DEFAULT NULL, `reference_table` varchar(50) DEFAULT NULL, `reference_column` varchar(50) DEFAULT NULL, `start_day` int(11) DEFAULT NULL, `iterations` int(11) DEFAULT NULL, `sms_interval` int(11) DEFAULT NULL, `description` varchar(255) DEFAULT NULL);
CREATE TABLE `fm_sms_text` ( `text_id` int(11) NOT NULL, `rule_id` varchar(10) DEFAULT NULL, `text` longtext, `language_id` varchar(10) DEFAULT NULL, `description` varchar(255) DEFAULT NULL);
CREATE TABLE `fm_sputum_test` ( `patient_id` varchar(12) NOT NULL, `sample_no` int(11) NOT NULL, `sample_code` varchar(10) DEFAULT NULL, `collected_by` varchar(12) DEFAULT NULL, `date_collected` datetime DEFAULT NULL, `month` int(11) DEFAULT NULL, `registered_by` varchar(12) DEFAULT NULL, `date_registered` datetime DEFAULT NULL, `sputum_quality` varchar(10) DEFAULT NULL, `smear_tested_by` varchar(12) DEFAULT NULL, `date_smear_tested` datetime DEFAULT NULL, `smear_result` varchar(10) DEFAULT NULL, `smear_remarks` varchar(255) DEFAULT NULL, `gxp_tested_by` varchar(12) DEFAULT NULL, `date_gxp_tested` datetime DEFAULT NULL, `gxp_result` varchar(10) DEFAULT NULL, `rif_resistance` varchar(10) DEFAULT NULL, `gxp_remarks` varchar(255) DEFAULT NULL);
CREATE TABLE `fm_user` ( `pid` varchar(12) NOT NULL, `user_name` varchar(12) NOT NULL, `current_status` char(1) NOT NULL, `password` varchar(255) NOT NULL, `secret_question` varchar(255) NOT NULL, `secret_answer` varchar(255) NOT NULL, `logged_in` bit(1) DEFAULT NULL, `role` varchar(10) NOT NULL, `location` varchar(12) DEFAULT NULL);
CREATE TABLE `fm_user_mapping` ( `user_id` varchar(12) NOT NULL, `location_id` varchar(12) NOT NULL, `current_status` varchar(5) DEFAULT NULL, `time_from` time DEFAULT NULL, `time_to` time DEFAULT NULL, `week_days` varchar(7) DEFAULT NULL);
CREATE TABLE `fm_user_rights` ( `user_role` varchar(10) NOT NULL, `menu_name` varchar(50) NOT NULL, `search_access` bit(1) NOT NULL, `insert_access` bit(1) NOT NULL, `update_access` bit(1) NOT NULL, `delete_access` bit(1) NOT NULL, `print_access` bit(1) NOT NULL);
CREATE TABLE `fm_visit` ( `visit_no` int(11) NOT NULL, `patient_id` varchar(12) NOT NULL, `visit_purpose` varchar(10) NOT NULL, `disease_confirmed` bit(1) DEFAULT NULL, `visit_date` datetime DEFAULT NULL);
